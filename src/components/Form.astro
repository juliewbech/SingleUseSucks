---
import Button from "./Button.astro";
import Button2 from "./Button2.astro";
---

<div
  id="plasticChangeDonationsAmountOptions"
  class="plastic-change-donations__amounts p-8 max-w-xl mx-auto bg-darkblue shadow-lg rounded-lg"
>
  <h2 class="flex justify-center text-2xl text-plasticpink poppins-semibold mb-6">
    Støt os
  </h2>

  <div class="mb-6 poppins-regular">
    <!-- Betalingstype -->
    <div
      class="flex items-center justify-center gap-4 mb-4"
      id="donationOptions"
    >
      <input
        id="option-single"
        type="radio"
        name="pre_paymentType"
        value="Single"
        class="hidden "
        checked
      />
      <label
        for="option-single"
        class="w-full text-center p-4 cursor-pointer rounded-full"
        data-default-color="#C0E5FB"
      >
        Støt én gang
      </label>

      <input
        id="option-recurring"
        type="radio"
        name="pre_paymentType"
        value="Recurring"
        class="hidden"
      />
      <label
        for="option-recurring"
        class="w-full text-center p-4 cursor-pointer text-darkblue rounded-full whitespace-nowrap"
        data-default-color="#C0E5FB"
      >
        Støt månedligt
      </label>
    </div>

    <!-- Beløb -->
    <div class="mb-4">
      <div class="flex justify-between mb-2 gap-4" id="donationAmounts">
        <input
          id="donation-500"
          name="pre_amount"
          type="radio"
          value="500"
          class="hidden"
        />
        <label
          for="donation-500"
          class="w-full text-center p-2 cursor-pointer text-darkblue rounded-full"
          data-default-color="#C0E5FB"
        >
          500 kr.
        </label>

        <input
          id="donation-250"
          name="pre_amount"
          type="radio"
          value="250"
          class="hidden"
        />
        <label
          for="donation-250"
          class="w-full text-center p-2 text-darkblue cursor-pointer rounded-full"
          data-default-color="#C0E5FB"
        >
          250 kr.
        </label>

        <input
          id="donation-125"
          name="pre_amount"
          type="radio"
          value="125"
          class="hidden"
        />
        <label
          for="donation-125"
          class="w-full text-center text-darkblue p-2 cursor-pointer rounded-full"
          data-default-color="#C0E5FB"
        >
          125 kr.
        </label>
      </div>
    </div>

    <!-- Andet beløb -->
    <div class="mb-6">
      <label for="other-amount" class="block text-sm font-medium mb-2 text-eggs"
        >Andet beløb</label
      >
      <div class="flex items-center gap-2">
        <input
          id="other-amount"
          name="amountOther"
          type="number"
          min="20"
          step="1"
          placeholder="Indtast beløb"
          class="w-full p-4 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-plasticpink"
        />
        <span class="text-eggs">kr.</span>
      </div>
    </div>

    <Button2 variant="secondary", size="medium">Støt nu</Button2>
  </div>
</div>

<script>
  const donationOptions = document.getElementById("donationOptions");
  const optionLabels = donationOptions.querySelectorAll("label");
  const optionInputs = donationOptions.querySelectorAll('input[type="radio"]');

  function updateActiveState() {
    optionLabels.forEach((label, index) => {
      if (optionInputs[index].checked) {
        label.style.backgroundColor = "#EB3858";
        label.style.color = "#ffffff";
      } else {
        label.style.backgroundColor = label.getAttribute("data-default-color");
        label.style.color = "#000000";
      }
    });
  }

  updateActiveState();
  optionInputs.forEach((input) =>
    input.addEventListener("change", updateActiveState)
  );

  const donationAmounts = document.getElementById("donationAmounts");
  const amountLabels = donationAmounts.querySelectorAll("label");
  const amountInputs = donationAmounts.querySelectorAll('input[type="radio"]');

  function updateAmountSelection() {
    amountLabels.forEach((label, index) => {
      if (amountInputs[index].checked) {
        label.style.backgroundColor = "#EB3858";
        label.style.color = "#ffffff";
      } else {
        label.style.backgroundColor = label.getAttribute("data-default-color");
        label.style.color = "#000000";
      }
    });
  }

  updateAmountSelection();
  amountInputs.forEach((input) =>
    input.addEventListener("change", updateAmountSelection)
  );

  const otherAmountInput = document.getElementById("other-amount");
  otherAmountInput.addEventListener("focus", () => {
    amountInputs.forEach((input) => (input.checked = false));
    updateAmountSelection();
  });
</script>
